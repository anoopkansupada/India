<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Kansupada-Oberoi Royal Expedition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Leaflet CSS for interactive map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Chosen Palette: Royal Rajasthan -->
    <!-- 
        Primary Background: #FDFBF7 (Warm Sandstone)
        Text: #1F2937 (Charcoal)
        Accent: #9F1239 (Mughal Red) for calls to action/highlights
        Secondary: #B45309 (Marigold/Saffron) for subheaders
        Tertiary: #064E3B (Royal Green) for nature/safari elements
    -->

    <!-- Application Structure Plan: 
         1. Header & Quick Stats: Immediate high-level overview for the VC/Strategist.
         2. Interactive Master Timeline: The core feature. A day-by-day scroller with clear times, locations, and "Vibe" indicators.
         3. The "Export" Utility: A prominent button to download the CSV for Google Sheets import (Requested specifically).
         4. Concierge Details (Tabs): 
            - Dining Ledger: Specific restaurants, cuisines, and dress codes.
            - Logistics & Packing: Flight numbers, outfit advice per location.
         5. Visual Analysis: Charts showing the balance of culture vs. chill to reassure the parents and new GF.
    -->

    <!-- Visualization & Content Choices:
         - Timeline: Vertical flex layout with distinct time blocks. Goal: Clarity on "Where do I need to be?".
         - Charts: Doughnut chart for Activity Balance (Relaxation vs. Travel). Goal: Prove the trip isn't too hectic.
         - Dining Cards: Grid layout. Goal: Show menu vibes and dress codes.
         - Interaction: Vanilla JS filter for "Day View" and CSV Export generation. Also, all URLs are now stable.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Lato', sans-serif;
            background-color: #FDFBF7;
            color: #1F2937;
        }
        h1, h2, h3, .serif-font {
            font-family: 'Playfair Display', serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            height: 250px;
        }
        @media (min-width: 640px) {
            .chart-container {
                height: 300px;
            }
        }
        .timeline-line {
            position: absolute;
            left: 24px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #E5E7EB;
            z-index: 0;
        }
        .luxury-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .luxury-card:hover {
            transform: translateY(-2px);
            border-left: 4px solid #9F1239; /* Mughal Red */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .restaurant-link {
            color: #9F1239;
        }
        .restaurant-link:hover {
            color: #b91c1c; /* Slightly darker on hover */
        }
        /* Custom scrollbar for timeline */
        .timeline-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .timeline-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .timeline-scroll::-webkit-scrollbar-thumb {
            background: #D1D5DB;
            border-radius: 4px;
        }
        /* Map container */
        #map {
            height: 500px;
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        @media (max-width: 640px) {
            #map {
                height: 400px;
            }
        }
        /* Custom map popup styling */
        .leaflet-popup-content-wrapper {
            border-radius: 8px;
        }
        .leaflet-popup-content {
            font-family: 'Lato', sans-serif;
            margin: 12px;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Navigation / Hero -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center">
                    <span class="text-3xl text-rose-800 mr-3">‚öúÔ∏è</span>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900 serif-font tracking-wide">The Royal Expedition</h1>
                        <p class="text-xs text-gray-500 uppercase tracking-widest">Dec 17 - 25, 2025 ‚Ä¢ The Oberoi Circuit</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="feedback.html" class="hidden md:flex items-center bg-purple-700 hover:bg-purple-800 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors shadow-sm">
                        <span>üí≠ Suggest Changes</span>
                    </a>
                    <div class="text-right hidden sm:block">
                        <div class="text-sm font-bold text-gray-900">10 Travelers</div>
                        <div class="text-xs text-gray-500">Zane's 3rd Birthday</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        
        <!-- INTRO CONTEXT -->
        <div class="mb-8 bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            <h2 class="text-xl font-bold serif-font text-gray-800 mb-2">üéØ Trip Command Center</h2>
            <p class="text-gray-600 leading-relaxed mb-3">
                <strong>UPDATED with all confirmed Mitesh reservations.</strong> This interface consolidates the complete logistics for the Kansupada Family Oberoi circuit (Dec 17-25, 2025).
                All dining entries include direct restaurant URLs, dress codes, and confirmed booking details from WhatsApp/email confirmations.
            </p>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                <div class="bg-rose-50 p-3 rounded">
                    <div class="font-bold text-rose-900">10 Travelers</div>
                    <div class="text-rose-600 text-xs">2 Adults, 8 Family</div>
                </div>
                <div class="bg-amber-50 p-3 rounded">
                    <div class="font-bold text-amber-900">4 Hotels</div>
                    <div class="text-amber-600 text-xs">All Oberoi Properties</div>
                </div>
                <div class="bg-blue-50 p-3 rounded">
                    <div class="font-bold text-blue-900">9 Days</div>
                    <div class="text-blue-600 text-xs">Dec 17 - Dec 25</div>
                </div>
                <div class="bg-green-50 p-3 rounded">
                    <div class="font-bold text-green-900">üéÇ Birthday!</div>
                    <div class="text-green-600 text-xs">Zane turns 3 on Dec 24</div>
                </div>
            </div>
        </div>

        <!-- REFERENCE DOCUMENTS -->
        <div class="mb-8 bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg shadow-sm border border-purple-100">
            <h2 class="text-xl font-bold serif-font text-purple-900 mb-3">üìÑ Reference Documents</h2>
            <p class="text-gray-700 text-sm mb-4">Download detailed information about Oberoi experiences and dining options:</p>
            <div class="flex flex-col sm:flex-row gap-3">
                <a href="Mitesh/OBEROI EXPERIENCES.pdf" target="_blank" class="flex-1 flex items-center justify-center bg-white hover:bg-purple-100 border-2 border-purple-300 text-purple-900 font-semibold px-6 py-3 rounded-lg transition-all shadow-sm hover:shadow-md">
                    <span class="mr-2 text-2xl">üè∞</span>
                    <span>Oberoi Experiences</span>
                </a>
                <a href="Mitesh/DINING OPTIONS (1).pdf" target="_blank" class="flex-1 flex items-center justify-center bg-white hover:bg-purple-100 border-2 border-purple-300 text-purple-900 font-semibold px-6 py-3 rounded-lg transition-all shadow-sm hover:shadow-md">
                    <span class="mr-2 text-2xl">üçΩÔ∏è</span>
                    <span>Dining Options</span>
                </a>
            </div>
        </div>

        <!-- INTERACTIVE MAP -->
        <div class="mb-8 bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            <h2 class="text-xl font-bold serif-font text-gray-800 mb-2">üó∫Ô∏è Journey Map</h2>
            <p class="text-gray-600 text-sm mb-4">Interactive map showing your route through Rajasthan: Udaipur ‚Üí Agra ‚Üí Ranthambore ‚Üí Jaipur</p>
            <div id="map"></div>
            <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-3 text-xs">
                <div class="flex items-center">
                    <div class="w-3 h-3 bg-red-600 rounded-full mr-2"></div>
                    <span class="text-gray-700">Day 1-2: Udaipur</span>
                </div>
                <div class="flex items-center">
                    <div class="w-3 h-3 bg-blue-600 rounded-full mr-2"></div>
                    <span class="text-gray-700">Day 3-4: Agra</span>
                </div>
                <div class="flex items-center">
                    <div class="w-3 h-3 bg-green-600 rounded-full mr-2"></div>
                    <span class="text-gray-700">Day 4-6: Ranthambore</span>
                </div>
                <div class="flex items-center">
                    <div class="w-3 h-3 bg-purple-600 rounded-full mr-2"></div>
                    <span class="text-gray-700">Day 6-9: Jaipur</span>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- LEFT COLUMN: Interactive Timeline (The "Annoying Brother" View) -->
            <div class="lg:col-span-2 space-y-6">
                <div class="flex justify-between items-end mb-2">
                    <h2 class="text-2xl font-bold serif-font text-gray-900">Day-by-Day Protocol</h2>
                    <div class="flex space-x-2 text-sm">
                        <button onclick="filterTimeline('all')" class="px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded text-gray-700 font-medium active-filter" id="btn-all">All</button>
                        <button onclick="filterTimeline('logistics')" class="px-3 py-2 bg-white border border-gray-300 hover:bg-gray-50 rounded text-gray-600" id="btn-logistics">Logistics</button>
                        <button onclick="filterTimeline('dining')" class="px-3 py-2 bg-white border border-gray-300 hover:bg-gray-50 rounded text-gray-600" id="btn-dining">Dining</button>
                    </div>
                </div>

                <!-- Timeline Container -->
                <div id="timeline-container" class="space-y-8 relative">
                    <!-- JS will populate this -->
                </div>
            </div>

            <!-- RIGHT COLUMN: Analytics, Concierge & Dining (The "Strategist/Parent" View) -->
            <div class="lg:col-span-1 space-y-8">
                
                <!-- Trip Balance Chart -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="text-lg font-bold serif-font text-gray-900 mb-4">Pace Analysis</h3>
                    <p class="text-sm text-gray-500 mb-4">Balancing the "Go-Go-Go" vs. "Just Chill."</p>
                    <div class="chart-container flex justify-center">
                        <canvas id="balanceChart"></canvas>
                    </div>
                </div>

                <!-- Dining Highlights -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="text-lg font-bold serif-font text-gray-900 mb-4">Gastronomy & Dress Code</h3>
                    <div class="space-y-4" id="dining-list">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Logistics Card -->
                <div class="bg-amber-50 p-6 rounded-xl border border-amber-100">
                    <h3 class="text-lg font-bold serif-font text-amber-900 mb-2">üöô Logistics Brief</h3>
                    <ul class="space-y-3 text-sm text-amber-900">
                        <li class="flex items-start">
                            <span class="mr-2">‚úàÔ∏è</span>
                            <span><strong>Dec 17 BOM‚ÜíUDR:</strong> AI 2579, 10 pax confirmed. Airport pickup arranged.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2">‚úàÔ∏è</span>
                            <span><strong>Dec 19 UDR‚ÜíDEL:</strong> Flight confirmed (Pre-Agra drive)</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2">‚úàÔ∏è</span>
                            <span><strong>Dec 25 JAI‚ÜíBOM:</strong> 7:55 PM flight. Airport transfer at 5:30 PM.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2">üöô</span>
                            <span><strong>Vehicle:</strong> Luxury van/coach from Mitesh (similar to Urbania/Tempo Traveller). White with comfortable seating, baggage space. Car seat requested.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2">üë®‚Äçüè´</span>
                            <span><strong>Guides:</strong> English-speaking, government-approved guides booked by Mitesh for Udaipur (Day 2) and Delhi-Jaipur segment. Kid-friendly storytellers requested.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2">üëó</span>
                            <span><strong>Packing:</strong> Layers essential! Mornings in Ranthambore are COLD (5¬∞C/40¬∞F). Afternoons in Jaipur are sunny (24¬∞C/75¬∞F). Dress codes range from Casual to Resort Elegant.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2">üçº</span>
                            <span><strong>Zane (age 3):</strong> High chairs confirmed at all restaurant bookings. NOTE: Request 5:30 PM daily snacks from hotel concierge.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gray-900 text-white py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="serif-font text-xl mb-4">The Oberoi Experience</p>
            <p class="text-gray-400 text-sm">Curated for the Kansupada Family ‚Ä¢ Dec 2025</p>
        </div>
    </footer>

    <script>
        // --- DATA STORE ---
        // Official Oberoi hotel URLs
        const OBEROI_UDAIVILAS_URL = "https://www.oberoihotels.com/hotels-in-udaipur-udaivilas-resort/";
        const OBEROI_AMARVILAS_URL = "https://www.oberoihotels.com/hotels-in-agra-amarvilas-resort/";
        const OBEROI_VANYAVILAS_URL = "https://www.oberoihotels.com/hotels-in-ranthambhore-vanyavilas-resort/";
        const OBEROI_RAJVILAS_URL = "https://www.oberoihotels.com/hotels-in-jaipur-rajvilas-resort/";
        
        const tripData = [
            {
                day: "Day 1",
                date: "Tue, Dec 17",
                location: "Udaipur",
                hotel: "Oberoi Udaivilas",
                temp: "59-77¬∞F",
                events: [
                    { time: "10:30 AM", title: "‚úàÔ∏è Flight: AI 2579 BOM‚ÜíUDR", type: "logistics", detail: "Air India 2579. Mumbai (BOM) to Udaipur (UDR). PNR: DJM9L3. 10 Passengers. Arrival: 12:00 PM." },
                    { time: "12:00 PM", title: "Airport Pickup", type: "logistics", detail: "10 people. Transfer to Oberoi Udaivilas." },
                    { time: "02:30 PM", title: "Early Check-in: Oberoi Udaivilas", type: "logistics", detail: "Rooms ready by 2:30-3:00 PM. Welcome ceremony. NOTE: Request 5:30 PM daily snacks for Zane from concierge." },
                    { time: "05:00 PM", title: "Sunset Boat Ride", type: "culture", detail: "Private boat from hotel dock to Lake Pichola. Boat transfer to Taj Lake Palace for dinner." },
                    { time: "06:00 PM", title: "Dinner: Taj Lake Palace", type: "dining", detail: "‚Çπ10,500 per person cover charge. Boat access from hotel. *Smart Casual to Elegant.* High chair confirmed.", url: "https://www.tajhotels.com/en-in/taj/taj-lake-palace-udaipur/dining/" }
                ]
            },
            {
                day: "Day 2",
                date: "Wed, Dec 18",
                location: "Udaipur",
                hotel: "Oberoi Udaivilas",
                temp: "59-77¬∞F",
                events: [
                    { time: "08:00 AM", title: "Breakfast at Hotel", type: "dining", detail: "Buffet & A la carte. Leisurely morning.", url: OBEROI_UDAIVILAS_URL },
                    { time: "10:00 AM", title: "City Palace Tour", type: "culture", detail: "Government-approved guide, good with kids (ages 3 & 9). Booked by Mitesh. NOTE: Request 5:30 PM snack for Zane from concierge." },
                    { time: "12:30 PM", title: "Lunch: Ambrai Restaurant", type: "dining", detail: "Lakeside seating with City Palace views. 10 people, high chair. *Casual to Smart Casual.*", url: "https://www.ambrai.com/" },
                    { time: "04:00 PM", title: "Miniature Painting Workshop", type: "culture", detail: "Shyam Arts (complimentary via hotel)." },
                    { time: "05:00 PM", title: "Glass Inlay Art (Thekri)", type: "culture", detail: "Traditional craft workshop (complimentary via hotel)." },
                    { time: "06:00 PM", title: "Dinner at Hotel", type: "dining", detail: "Beautiful ambiance with Western & kid-friendly options. High chair. *Smart Casual.*", url: OBEROI_UDAIVILAS_URL }
                ]
            },
            {
                day: "Day 3",
                date: "Thu, Dec 19",
                location: "Udaipur ‚Üí Agra",
                hotel: "Oberoi Udaivilas ‚Üí Oberoi Amarvilas",
                temp: "50-72¬∞F",
                events: [
                    { time: "08:00 AM", title: "Breakfast at Hotel (Included)", type: "dining", detail: "Buffet & A la carte. All breakfasts included in hotel reservation.", url: OBEROI_UDAIVILAS_URL },
                    { time: "09:00 AM", title: "Depart for Airport", type: "logistics", detail: "Transfer to UDR Airport. Government-approved guide from Mitesh." },
                    { time: "11:00 AM", title: "‚úàÔ∏è Flight: UDR‚ÜíDEL", type: "logistics", detail: "Udaipur (UDR) to Delhi (DEL). IndiGo or Air India (Confirmed). Flight details TBD." },
                    { time: "12:00 PM", title: "Lunch Stop in Delhi", type: "dining", detail: "Family-friendly restaurant en route. TBD with Mitesh recommendations." },
                    { time: "01:30 PM", title: "Drive: DEL to Agra", type: "logistics", detail: "Yamuna Expressway (~3.5 hours). One vehicle from Mitesh." },
                    { time: "05:00 PM", title: "Check-in: Amarvilas", type: "logistics", detail: "Rooms ready by 5:00 PM. All rooms have Taj Mahal views. NOTE: Request 5:30 PM snack for Zane from concierge." },
                    { time: "06:00 PM", title: "Dinner at Hotel", type: "dining", detail: "Taj views if possible. Western/kid-friendly menu. High chair. *Smart Casual.*", url: OBEROI_AMARVILAS_URL }
                ]
            },
            {
                day: "Day 4",
                date: "Fri, Dec 20",
                location: "Agra ‚Üí Ranthambore",
                hotel: "Oberoi Amarvilas ‚Üí Oberoi Vanyavilas",
                temp: "46-68¬∞F",
                events: [
                    { time: "06:00 AM", title: "Kids Breakfast Boxes", type: "dining", detail: "Ready by 6:00 AM (2 boxes for ages 3 & 9). Request from hotel concierge." },
                    { time: "06:15 AM", title: "Sunrise Taj Mahal Tour", type: "culture", detail: "Private guide good with kids. Golf cart transfer. *CRITICAL: Taj Mahal closed Fridays* - Verify date!" },
                    { time: "09:30 AM", title: "Breakfast at Hotel (Included)", type: "dining", detail: "Return to hotel after Taj visit. Buffet included in reservation.", url: OBEROI_AMARVILAS_URL },
                    { time: "11:00 AM", title: "Drive to Ranthambore", type: "logistics", detail: "~5 hours drive from Agra to Ranthambore. Fatehpur Sikri - ask Mitesh if worth it with kids." },
                    { time: "01:00 PM", title: "Packed Lunch En Route", type: "dining", detail: "Packed lunches from Oberoi Amarvilas (hotel said no restaurant recommendations available). Request packed lunch boxes for 10 people from hotel." },
                    { time: "05:00 PM", title: "Check-in: Vanyavilas", type: "logistics", detail: "Luxury Tents. Early arrival, rooms ready. NOTE: Request 5:30 PM snack for Zane from concierge." },
                    { time: "06:00 PM", title: "Dinner at Hotel (Included)", type: "dining", detail: "Arrival night. All meals included at Vanyavilas. High chair. *Casual Resort Wear.*", url: OBEROI_VANYAVILAS_URL }
                ]
            },
            {
                day: "Day 5",
                date: "Sat, Dec 21",
                location: "Ranthambore",
                hotel: "Oberoi Vanyavilas",
                temp: "41-72¬∞F",
                events: [
                    { time: "06:30 AM", title: "Kids Breakfast Boxes", type: "dining", detail: "Ready by 6:30 AM (2 boxes for kids). Request from hotel concierge." },
                    { time: "07:00 AM", title: "Tiger Safari", type: "culture", detail: "10 people. REQUESTED Zones 1/2/3 (better tiger sightings). Private gypsies preferred. Confirm zone & vehicle. *DRESS WARM - 5¬∞C/40¬∞F morning temps!*" },
                    { time: "12:00 PM", title: "Lunch at Hotel (Included)", type: "dining", detail: "All meals included in Vanyavilas stay. High chair available.", url: OBEROI_VANYAVILAS_URL },
                    { time: "02:00 PM", title: "Spa: Couples Treatment", type: "leisure", detail: "Anoop & Lauren, 2:00-4:30 PM post-safari treatment. Check availability for other adults." },
                    { time: "04:00 PM", title: "Block Printing for Kids", type: "culture", detail: "If hotel can arrange. Check with concierge. NOTE: Request 5:30 PM snack for Zane." },
                    { time: "Evening", title: "Optional Activities", type: "leisure", detail: "Stargazing (if hotel offers) OR Camel cart ride (if available)." },
                    { time: "06:00 PM", title: "Dinner at Hotel (Included)", type: "dining", detail: "Regular restaurant OR bush dinner (ask hotel for best option). All meals included. High chair. *Casual Resort Wear.*", url: OBEROI_VANYAVILAS_URL }
                ]
            },
            {
                day: "Day 6",
                date: "Sun, Dec 22",
                location: "Ranthambore ‚Üí Jaipur",
                hotel: "Oberoi Vanyavilas ‚Üí Oberoi Rajvilas",
                temp: "50-75¬∞F",
                events: [
                    { time: "08:00 AM", title: "Breakfast at Hotel (Included)", type: "dining", detail: "All meals included at Vanyavilas. Buffet & A la carte.", url: OBEROI_VANYAVILAS_URL },
                    { time: "09:00 AM", title: "Checkout", type: "logistics", detail: "Depart Vanyavilas for Jaipur." },
                    { time: "10:00 AM", title: "Morning Activity (Optional)", type: "culture", detail: "Village walk OR Ranthambore Fort - ask hotel which is better for kids with ages 3 & 9." },
                    { time: "10:30 AM", title: "Drive to Jaipur", type: "logistics", detail: "~3.5 hours. Packed lunch OR lunch en route." },
                    { time: "02:00 PM", title: "Check-in: Rajvilas", type: "logistics", detail: "Garden/Pool Villas. NOTE: Request 5:30 PM daily snack for Zane from concierge." },
                    { time: "03:00 PM", title: "Leisure Time", type: "leisure", detail: "Pool & relaxation. Recover from drive." },
                    { time: "06:00 PM", title: "Dinner: Giardino at Jai Mahal Palace", type: "dining", detail: "CONFIRMED. 10 people, 1 high chair. Near Rambagh Palace (Taj Hotel). *Smart Casual.*", url: "https://www.tajhotels.com/en-in/jai-mahal-palace-jaipur/restaurants/giardino/" }
                ]
            },
            {
                day: "Day 7",
                date: "Mon, Dec 23",
                location: "Jaipur",
                hotel: "Oberoi Rajvilas",
                temp: "50-75¬∞F",
                events: [
                    { time: "08:30 AM", title: "Breakfast at Hotel (Included)", type: "dining", detail: "Fuel up before elephants! Buffet & A la carte included in reservation.", url: OBEROI_RAJVILAS_URL },
                    { time: "09:30 AM", title: "Elefantastic Experience", type: "culture", detail: "ALL 10 people. Elephant interaction, feeding, painting. THE anchor experience. *Casual clothes that can get dirty.*", url: "https://www.elefantastic.in/" },
                    { time: "01:00 PM", title: "Transfer to Rambagh Palace", type: "logistics", detail: "~30 min drive from hotel." },
                    { time: "01:30 PM", title: "Lunch: The Verandah at Rambagh Palace", type: "dining", detail: "CONFIRMED. 10 people, 1 high chair. ‚Çπ3,500+ per person minimum. If not available: Rajput Room or Marble Arch as backup. *Smart Casual to Resort Elegant.*", url: "https://www.tajhotels.com/en-in/taj/rambagh-palace-jaipur/restaurants/the-verandah/" },
                    { time: "03:00 PM", title: "Afternoon Leisure at Rajvilas", type: "leisure", detail: "Complete relaxation post-elephants. Pool time. NO activities planned. NOTE: Request 5:30 PM snack for Zane from concierge." },
                    { time: "06:00 PM", title: "Dinner: Wink at The Lalit Jaipur", type: "dining", detail: "CONFIRMED. 10 people, 1 high chair. Contemporary dining. *Smart Casual.*", url: "https://www.thelalit.com/the-lalit-jaipur/restaurants-bars/wink/" }
                ]
            },
            {
                day: "Day 8",
                date: "Tue, Dec 24",
                location: "Jaipur - ZANE'S 3RD BIRTHDAY! üéÇüêò",
                hotel: "Oberoi Rajvilas",
                temp: "50-75¬∞F",
                events: [
                    { time: "08:00 AM", title: "Breakfast at Hotel (Included)", type: "dining", detail: "Birthday boy breakfast! Buffet & A la carte included in reservation.", url: OBEROI_RAJVILAS_URL },
                    { time: "09:00 AM", title: "Amber Fort Tour", type: "culture", detail: "Jeep ascent. Private guide good with kids. Government-approved guide from Mitesh." },
                    { time: "12:00 PM", title: "Return to Rajvilas", type: "logistics", detail: "ELEPHANT-THEMED birthday room setup complete with balloons/banner (Dec 23-24 overnight decoration)." },
                    { time: "12:30 PM", title: "üéÇ BIRTHDAY LUNCH: Marble Arch at Rambagh Palace", type: "dining", detail: "CONFIRMED. Steam (pizza) OR Marble Arch. 2:00 PM, 10 people, 1 high chair. REALLY FUN setup with balloons, cake, singing. *Casual Festive.*", url: "https://www.tajhotels.com/en-in/taj/rambagh-palace-jaipur/restaurants/" },
                    { time: "02:00 PM", title: "Birthday Activities at Hotel", type: "leisure", detail: "Private yoga lessons (1 hr), Private chef session (kids+adults, 1 hr), Private pickleball lessons (1 hr), Indian wine tasting (adults only, 1 hr), Treasure hunt (Olivia & Zane, elephant theme), Kite flying (whole family). NOTE: Request 5:30 PM special birthday snack from concierge." },
                    { time: "06:00 PM", title: "üéÇ Christmas Eve BIRTHDAY DINNER: Surya Mahal", type: "dining", detail: "CONFIRMED at Rajvilas. PRIVATE garden setup. Festive Menu ‚Çπ12,000+ per person. 10 people, high chair. Photographer arranged. Lemon/vanilla OR funfetti cake with 'Happy 3rd Birthday Zane' elephant design. *Resort Elegant to Formal.*", url: OBEROI_RAJVILAS_URL }
                ]
            },
            {
                day: "Day 9",
                date: "Wed, Dec 25",
                location: "Jaipur ‚Üí Mumbai/Delhi (Departure)",
                hotel: "Oberoi Rajvilas ‚Üí Airport",
                temp: "50-75¬∞F",
                events: [
                    { time: "09:00 AM", title: "Leisurely Morning", type: "leisure", detail: "Sleep in after birthday festivities!" },
                    { time: "10:00 AM", title: "Breakfast at Hotel (Included)", type: "dining", detail: "Final breakfast in India. Buffet & A la carte included in reservation.", url: OBEROI_RAJVILAS_URL },
                    { time: "11:00 AM", title: "Lunch: Surya Mahal at Rajvilas", type: "dining", detail: "CONFIRMED. 10 people, 1 high chair. Time flexible - confirm before departure. *Casual Resort Wear.*", url: OBEROI_RAJVILAS_URL },
                    { time: "12:00 PM", title: "Late Checkout", type: "logistics", detail: "Arranged until 12:00-1:00 PM. Pack up and prepare for departure." },
                    { time: "05:30 PM", title: "Airport Transfer", type: "logistics", detail: "Pickup at 5:30 PM. Transfer to Jaipur Airport (JAI) for 7:55 PM flight." },
                    { time: "07:55 PM", title: "‚úàÔ∏è Flight Departure: JAI‚ÜíBOM/DEL", type: "logistics", detail: "Jaipur (JAI) to Mumbai (BOM) or Delhi (DEL). Flight details TBD. 10 passengers." }
                ]
            }
        ];

        // Dining specific data for side panel - UPDATED WITH CONFIRMED RESERVATIONS
        const diningHighlights = [
            { name: "Taj Lake Palace", loc: "Udaipur", note: "‚Çπ10,500/person ‚Ä¢ Boat Access", dress: "Smart Casual to Elegant", url: "https://www.tajhotels.com/en-in/taj/taj-lake-palace-udaipur/dining/" },
            { name: "Ambrai", loc: "Udaipur", note: "Lakeside ‚Ä¢ City Palace Views", dress: "Casual to Smart Casual", url: "https://www.ambrai.com/" },
            { name: "Giardino", loc: "Jai Mahal Palace, Jaipur", note: "Dec 22 Dinner", dress: "Smart Casual", url: "https://www.tajhotels.com/en-in/jai-mahal-palace-jaipur/restaurants/giardino/" },
            { name: "The Verandah", loc: "Rambagh Palace, Jaipur", note: "‚Çπ3,500/person ‚Ä¢ Dec 23 Lunch", dress: "Smart Casual to Elegant", url: "https://www.tajhotels.com/en-in/taj/rambagh-palace-jaipur/restaurants/the-verandah/" },
            { name: "Wink", loc: "The Lalit Jaipur", note: "Dec 23 Dinner ‚Ä¢ Contemporary", dress: "Smart Casual", url: "https://www.thelalit.com/the-lalit-jaipur/restaurants-bars/wink/" },
            { name: "Marble Arch / Steam", loc: "Rambagh Palace, Jaipur", note: "Dec 24 Birthday Lunch ‚Ä¢ Pizza", dress: "Casual Festive", url: "https://www.tajhotels.com/en-in/taj/rambagh-palace-jaipur/restaurants/" },
            { name: "Surya Mahal", loc: "Rajvilas, Jaipur", note: "Dec 24 Birthday Dinner ‚Ä¢ ‚Çπ12,000/person Festive Menu", dress: "Resort Elegant to Formal", url: OBEROI_RAJVILAS_URL }
        ];

        // --- RENDER FUNCTIONS ---

        function renderTimeline(filter) {
            const container = document.getElementById('timeline-container');
            container.innerHTML = ''; // Clear existing

            tripData.forEach((day, index) => {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'relative pl-8 sm:pl-10 py-2 group';

                // Vertical Line
                const line = document.createElement('div');
                line.className = 'absolute left-3 sm:left-4 top-0 bottom-0 w-0.5 bg-gray-200 group-last:bottom-auto group-last:h-full';
                dayDiv.appendChild(line);

                // Date Marker
                const marker = document.createElement('div');
                marker.className = 'absolute left-0 sm:left-1 w-6 h-6 sm:w-8 sm:h-8 bg-rose-900 rounded-full flex items-center justify-center text-white text-xs font-bold z-10 shadow-md';
                marker.innerText = (index + 1);
                dayDiv.appendChild(marker);

                // Content Block
                const content = document.createElement('div');
                content.className = 'mb-8';
                content.innerHTML = `
                    <div class="flex flex-col sm:flex-row sm:items-baseline mb-3">
                        <h3 class="text-xl font-bold text-gray-900 serif-font mr-3">${day.date}</h3>
                        <div class="flex flex-col sm:flex-row sm:items-baseline gap-2">
                            <span class="text-sm text-gray-500 font-medium uppercase tracking-wide">${day.location} ‚Ä¢ ${day.hotel}</span>
                            <span class="text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-semibold inline-block">üå°Ô∏è ${day.temp}</span>
                        </div>
                    </div>
                `;

                // Events List
                const eventList = document.createElement('div');
                eventList.className = 'space-y-3';
                
                let visibleEvents = 0;

                day.events.forEach(event => {
                    if (filter !== 'all' && event.type !== filter) return;
                    visibleEvents++;

                    // Icon Selection
                    let icon = 'üìç';
                    let bgClass = 'bg-white border-l-4 border-gray-300';
                    if (event.type === 'logistics') { icon = 'üöê'; bgClass = 'bg-gray-50 border-l-4 border-gray-400'; }
                    if (event.type === 'dining') { icon = 'üçΩÔ∏è'; bgClass = 'bg-white border-l-4 border-amber-500'; }
                    if (event.type === 'culture') { icon = 'üì∑'; bgClass = 'bg-white border-l-4 border-rose-700'; }
                    if (event.type === 'leisure') { icon = 'üçπ'; bgClass = 'bg-blue-50 border-l-4 border-blue-400'; }

                    // Link logic
                    let titleHTML = event.title;
                    if (event.url) {
                        titleHTML = `<a href="${event.url}" target="_blank" class="restaurant-link">${event.title}</a>`;
                    }

                    const eventCard = document.createElement('div');
                    eventCard.className = `luxury-card p-4 rounded shadow-sm ${bgClass}`;
                    eventCard.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center text-xs font-bold text-gray-500 mb-1 uppercase tracking-wider">
                                    <span class="mr-2 text-base">${icon}</span> ${event.time}
                                </div>
                                <h4 class="font-bold text-gray-900 text-lg break-words">${titleHTML}</h4>
                                <p class="text-sm text-gray-600 mt-1 break-words">${event.detail}</p>
                            </div>
                        </div>
                    `;
                    eventList.appendChild(eventCard);
                });

                if (visibleEvents > 0) {
                    content.appendChild(eventList);
                    dayDiv.appendChild(content);
                    container.appendChild(dayDiv);
                }
            });
        }

        function renderDining() {
            const container = document.getElementById('dining-list');
            container.innerHTML = '';
            diningHighlights.forEach(place => {
                // Link logic
                let nameHTML = place.name;
                if (place.url) {
                    nameHTML = `<a href="${place.url}" target="_blank" class="restaurant-link">${place.name}</a>`;
                }

                const div = document.createElement('div');
                div.className = "flex justify-between items-start border-b border-gray-100 pb-3 last:border-0";
                div.innerHTML = `
                    <div>
                        <div class="font-bold text-gray-800">${nameHTML}</div>
                        <div class="text-xs text-gray-500">${place.loc}</div>
                    </div>
                    <div class="text-right">
                        <div class="text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded inline-block mb-1">${place.note}</div>
                        <div class="text-xs text-gray-400 italic">${place.dress}</div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function renderCharts() {
            const ctx = document.getElementById('balanceChart').getContext('2d');

            // Calculate approximate hours spent on each activity type
            let cultureHours = 0, diningHours = 0, leisureHours = 0, logisticsHours = 0;

            tripData.forEach(day => {
                day.events.forEach(event => {
                    // Estimate hours based on activity type and typical durations
                    let hours = 0;

                    if (event.type === 'culture') {
                        // Tours, museums, activities: 2-4 hours each
                        if (event.title.includes('Safari')) hours = 4;
                        else if (event.title.includes('Tour') || event.title.includes('Fort')) hours = 3;
                        else if (event.title.includes('Elefantastic')) hours = 4;
                        else if (event.title.includes('Workshop') || event.title.includes('Painting') || event.title.includes('Art')) hours = 1.5;
                        else if (event.title.includes('Boat Ride')) hours = 1;
                        else hours = 2; // Default for cultural activities
                        cultureHours += hours;
                    }
                    else if (event.type === 'dining') {
                        // Meals: 1-2 hours each
                        if (event.title.includes('Breakfast')) hours = 1;
                        else if (event.title.includes('Lunch')) hours = 1.5;
                        else if (event.title.includes('Dinner')) hours = 2;
                        else if (event.title.includes('Boxes')) hours = 0.5; // Packed breakfast boxes
                        else hours = 1.5; // Default
                        diningHours += hours;
                    }
                    else if (event.type === 'leisure') {
                        // Relaxation, spa, activities: varies
                        if (event.title.includes('Spa')) hours = 2.5;
                        else if (event.title.includes('Activities') || event.title.includes('Birthday Activities')) hours = 3;
                        else if (event.title.includes('Leisure')) hours = 2;
                        else hours = 1.5; // Optional activities, etc.
                        leisureHours += hours;
                    }
                    else if (event.type === 'logistics') {
                        // Flights, drives, check-ins
                        if (event.title.includes('Flight') && event.title.includes('2579')) hours = 1.5; // BOM to UDR
                        else if (event.title.includes('Flight') && event.title.includes('UDR‚ÜíDEL')) hours = 1.5;
                        else if (event.title.includes('Flight Departure')) hours = 2;
                        else if (event.title.includes('Drive') && event.title.includes('Ranthambore')) hours = 5;
                        else if (event.title.includes('Drive') && event.title.includes('Jaipur')) hours = 3.5;
                        else if (event.title.includes('Drive') && event.title.includes('Agra')) hours = 3.5;
                        else if (event.title.includes('Check-in') || event.title.includes('Checkout')) hours = 0.5;
                        else if (event.title.includes('Transfer')) hours = 1;
                        else if (event.title.includes('Pickup')) hours = 0.5;
                        else hours = 1; // Default
                        logisticsHours += hours;
                    }
                });
            });

            const data = {
                labels: ['Culture & Sightseeing', 'Dining & Social', 'Leisure & Relax', 'Logistics & Travel'],
                datasets: [{
                    data: [cultureHours, diningHours, leisureHours, logisticsHours],
                    backgroundColor: [
                        '#be123c', // Culture (Rose 700)
                        '#f59e0b', // Dining (Amber 500)
                        '#60a5fa', // Leisure (Blue 400)
                        '#9ca3af'  // Logistics (Gray 400)
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            };

            new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: { family: "'Lato', sans-serif", size: 10 },
                                boxWidth: 10
                            }
                        }
                    },
                    layout: {
                        padding: 10
                    }
                }
            });
        }

        // --- EXPORT FUNCTIONALITY (THE USER REQUEST) ---
        function exportToCSV() {
            // Header
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Date,Time,Location,Activity,Category,Notes,Emails\n";

            // Emails included for sharing
            const emails = "bkansupada@gmail.com, reservations@oberoigroup.com";

            // Rows
            tripData.forEach(day => {
                day.events.forEach(event => {
                    // Escape commas in fields
                    const cleanTitle = event.title.replace(/,/g, " ");
                    const cleanDetail = event.detail.replace(/,/g, " ");
                    const row = `${day.date},${event.time},${day.location},${cleanTitle},${event.type},${cleanDetail},"${emails}"`;
                    csvContent += row + "\n";
                });
            });

            // Download Trigger
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "Kansupada_India_Itinerary_Detailed.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function filterTimeline(type) {
            // Update buttons
            document.querySelectorAll('button[id^="btn-"]').forEach(btn => {
                btn.classList.remove('bg-gray-200', 'font-medium', 'text-gray-700');
                btn.classList.add('bg-white', 'text-gray-600');
            });
            const activeBtn = document.getElementById(`btn-${type}`);
            activeBtn.classList.remove('bg-white', 'text-gray-600');
            activeBtn.classList.add('bg-gray-200', 'font-medium', 'text-gray-700');

            renderTimeline(type);
        }

        // --- MAP INITIALIZATION ---
        function initMap() {
            // Actual hotel and airport coordinates
            const locations = [
                {
                    name: 'Oberoi Udaivilas',
                    city: 'Udaipur',
                    coords: [24.5768, 73.6805],
                    address: 'Haridasji Ki Magri, Udaipur, Rajasthan 313001',
                    days: 'Day 1-2 (Dec 17-18)',
                    color: '#dc2626',
                    details: 'Lake Palace views ‚Ä¢ City Palace tour ‚Ä¢ Sunset boat ride'
                },
                {
                    name: 'Oberoi Amarvilas',
                    city: 'Agra',
                    coords: [27.1751, 78.0421],
                    address: 'Taj East Gate Road, Agra, Uttar Pradesh 282001',
                    days: 'Day 3-4 (Dec 19-20)',
                    color: '#2563eb',
                    details: 'Taj Mahal sunrise tour ‚Ä¢ All rooms with Taj views'
                },
                {
                    name: 'Oberoi Vanyavilas',
                    city: 'Ranthambore',
                    coords: [26.0173, 76.5026],
                    address: 'Ranthambore Road, Sawai Madhopur, Rajasthan 322001',
                    days: 'Day 4-6 (Dec 20-22)',
                    color: '#16a34a',
                    details: 'Tiger safari ‚Ä¢ Luxury tents ‚Ä¢ Spa treatments'
                },
                {
                    name: 'Oberoi Rajvilas',
                    city: 'Jaipur',
                    coords: [26.9124, 75.7873],
                    address: 'Goner Road, Jaipur, Rajasthan 303012',
                    days: 'Day 6-9 (Dec 22-25)',
                    color: '#9333ea',
                    details: "Zane's Birthday ‚Ä¢ Elefantastic ‚Ä¢ Amber Fort ‚Ä¢ Shopping"
                }
            ];

            // Airports
            const airports = [
                {
                    name: 'Maharana Pratap Airport (UDR)',
                    coords: [24.6177, 73.8961],
                    city: 'Udaipur'
                },
                {
                    name: 'Indira Gandhi Airport (DEL)',
                    coords: [28.5562, 77.1000],
                    city: 'Delhi'
                },
                {
                    name: 'Jaipur Airport (JAI)',
                    coords: [26.8242, 75.8122],
                    city: 'Jaipur'
                }
            ];

            // Initialize map centered on Rajasthan
            const map = L.map('map').setView([26.0, 75.0], 6);

            // Add tile layer (OpenStreetMap)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 18
            }).addTo(map);

            // Create custom icon function
            function createCustomIcon(color, number) {
                return L.divIcon({
                    className: 'custom-marker',
                    html: `<div style="background-color: ${color}; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 14px; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">${number}</div>`,
                    iconSize: [32, 32],
                    iconAnchor: [16, 16],
                    popupAnchor: [0, -16]
                });
            }

            // Add markers for each hotel location
            locations.forEach((location, index) => {
                const marker = L.marker(location.coords, {
                    icon: createCustomIcon(location.color, index + 1)
                }).addTo(map);

                // Add popup with details
                const popupContent = `
                    <div style="font-family: 'Lato', sans-serif;">
                        <h3 style="margin: 0 0 8px 0; font-size: 16px; font-weight: bold; color: #1f2937;">${location.name}</h3>
                        <p style="margin: 0 0 4px 0; font-size: 14px; color: ${location.color}; font-weight: 600;">${location.days}</p>
                        <p style="margin: 0 0 6px 0; font-size: 12px; color: #9ca3af; font-style: italic;">${location.address}</p>
                        <p style="margin: 0; font-size: 13px; color: #6b7280; line-height: 1.4;">${location.details}</p>
                    </div>
                `;
                marker.bindPopup(popupContent);
            });

            // Add airport markers (smaller, gray icons)
            airports.forEach(airport => {
                const airportIcon = L.divIcon({
                    className: 'airport-marker',
                    html: `<div style="background-color: #6b7280; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; border: 2px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.2);">‚úàÔ∏è</div>`,
                    iconSize: [24, 24],
                    iconAnchor: [12, 12],
                    popupAnchor: [0, -12]
                });

                const marker = L.marker(airport.coords, {
                    icon: airportIcon
                }).addTo(map);

                marker.bindPopup(`
                    <div style="font-family: 'Lato', sans-serif;">
                        <h3 style="margin: 0 0 4px 0; font-size: 14px; font-weight: bold; color: #1f2937;">${airport.name}</h3>
                        <p style="margin: 0; font-size: 12px; color: #6b7280;">${airport.city}</p>
                    </div>
                `);
            });

            // Draw route lines between locations
            const routeCoords = locations.map(loc => loc.coords);

            // Flight path from Udaipur Airport to Delhi Airport - dashed line
            L.polyline([airports[0].coords, airports[1].coords], {
                color: '#3b82f6',
                weight: 3,
                opacity: 0.6,
                dashArray: '10, 10',
                lineJoin: 'round'
            }).addTo(map).bindPopup('‚úàÔ∏è Flight: Udaipur (UDR) ‚Üí Delhi (DEL) - Dec 19');

            // Drive from Delhi to Agra via Yamuna Expressway - solid line
            L.polyline([airports[1].coords, locations[1].coords], {
                color: '#f59e0b',
                weight: 4,
                opacity: 0.7,
                lineJoin: 'round'
            }).addTo(map).bindPopup('üöô Drive: Delhi ‚Üí Agra via Yamuna Expressway (~3.5 hours)');

            // Drive from Agra to Ranthambore - solid line
            L.polyline([locations[1].coords, locations[2].coords], {
                color: '#f59e0b',
                weight: 4,
                opacity: 0.7,
                lineJoin: 'round'
            }).addTo(map).bindPopup('üöô Drive: Agra ‚Üí Ranthambore (~5 hours, Dec 20)');

            // Drive from Ranthambore to Jaipur - solid line
            L.polyline([locations[2].coords, locations[3].coords], {
                color: '#f59e0b',
                weight: 4,
                opacity: 0.7,
                lineJoin: 'round'
            }).addTo(map).bindPopup('üöô Drive: Ranthambore ‚Üí Jaipur (~3.5 hours, Dec 22)');

            // Fit map to show all locations (hotels and airports)
            const allCoords = [...routeCoords, ...airports.map(a => a.coords)];
            const bounds = L.latLngBounds(allCoords);
            map.fitBounds(bounds, { padding: [50, 50] });
        }

        // --- INIT ---
        window.onload = function() {
            renderTimeline('all');
            renderDining();
            renderCharts();
            initMap();
        };

    </script>
</body>
</html>